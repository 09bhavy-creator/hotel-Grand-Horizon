<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GRAND HORIZON | Sovereign Enterprise Suite v12.0</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Inter:wght@100;300;400;600;900&display=swap');

        :root {
            --gold: #D4AF37;
            --black: #050505;
            --white: #ffffff;
            --lux-ease: cubic-bezier(0.19, 1, 0.22, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; cursor: none; }
        body { font-family: 'Inter', sans-serif; background: var(--black); color: white; overflow-x: hidden; }
        .font-luxury { font-family: 'Playfair Display', serif; }

        /* CURSOR ENGINE */
        #cursor-main { width: 10px; height: 10px; background: var(--gold); border-radius: 50%; position: fixed; pointer-events: none; z-index: 10000; }
        #cursor-aura { width: 40px; height: 40px; border: 1px solid rgba(212, 175, 55, 0.4); border-radius: 50%; position: fixed; pointer-events: none; z-index: 9999; }

        /* GALLERY VIEWPORT */
        #gallery-viewport {
            height: 90vh; width: 100%; position: relative; overflow: hidden;
            background: #000; border-radius: 0 0 80px 80px;
        }
        .slide { position: absolute; inset: 0; width: 100%; height: 100%; opacity: 0; z-index: 0; display: none; }
        .slide.active { opacity: 1; z-index: 10; display: block; }
        .slide img { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.7); }
        .slide-caption { position: absolute; bottom: 100px; left: 100px; z-index: 20; opacity: 0; transform: translateY(30px); }

        /* INPUT STYLES */
        .lux-input {
            background: transparent; border-bottom: 2px solid rgba(255,255,255,0.1);
            padding: 20px 0; width: 100%; font-size: 1.5rem; outline: none;
            transition: 0.5s; font-family: 'Playfair Display', serif; color: white;
        }
        .lux-input:focus { border-color: var(--gold); }
        input[type="date"] { color-scheme: dark; }
        select.lux-input option { background: #080808; color: white; }

        /* BUTTON VISIBILITY FIX */
        button[type="button"], button[onclick*="logic.process"] {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            cursor: pointer !important;
            background: white !important;
            color: black !important;
            border: 3px solid var(--gold) !important;
            box-shadow: 0 10px 40px rgba(255, 255, 255, 0.3) !important;
        }
        button[type="button"]:hover, button[onclick*="logic.process"]:hover {
            background: var(--gold) !important;
            color: black !important;
            transform: translateY(-2px);
            box-shadow: 0 15px 50px rgba(212, 175, 55, 0.5) !important;
        }

        /* PRELOADER */
        #preloader {
            position: fixed; inset: 0; background: var(--black); z-index: 100000;
            display: flex; align-items: center; justify-content: center;
        }

        /* SPATIAL MAPPING */
        .room-node {
            width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;
            font-size: 9px; font-weight: bold; border-radius: 10px; transition: 0.5s;
        }
        .room-occupied { background: var(--gold); color: black; box-shadow: 0 0 20px rgba(212, 175, 55, 0.3); }
        .room-vacant { border: 1px solid #e0e0e0; color: #ccc; }

        /* UTILITIES */
        .reveal { opacity: 0; transform: translateY(60px); transition: 1.2s var(--lux-ease); }
        .reveal.active { opacity: 1; transform: translateY(0); }
    </style>
</head>
<body>

    <div id="cursor-main"></div>
    <div id="cursor-aura"></div>

    <div id="preloader">
        <div class="text-center">
            <h1 class="font-luxury text-gold text-5xl tracking-[15px] animate-pulse">GRAND HORIZON</h1>
            <p class="text-[9px] tracking-[8px] mt-4 opacity-50 uppercase">Enterprise Logic v12.0</p>
        </div>
    </div>

    <nav class="fixed w-full z-[5000] px-16 py-10 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent">
        <div class="flex flex-col">
            <span class="text-3xl font-luxury font-black text-gold tracking-widest">GH</span>
            <span class="text-[7px] tracking-[5px] uppercase opacity-60">Sovereign Estate</span>
        </div>
        <div class="hidden md:flex space-x-16">
            <a href="#gallery" class="text-[10px] tracking-[4px] uppercase hover:text-gold transition">Atmosphere</a>
            <a href="#booking" class="text-[10px] tracking-[4px] uppercase hover:text-gold transition">Reservations</a>
            <button onclick="admin.open()" class="text-[10px] tracking-[4px] uppercase text-gold font-black border-b border-gold/30">Staff Terminal</button>
        </div>
        <div class="text-right">
            <p class="text-[9px] text-gold uppercase font-bold">Suite Vacancy</p>
            <p class="text-lg"><span id="room-count" class="font-bold">20</span> / 20</p>
        </div>
    </nav>

    <main>
        <section class="h-screen relative flex items-center justify-center overflow-hidden">
            <img src="https://images.unsplash.com/photo-1542314831-068cd1dbfeeb" class="absolute inset-0 w-full h-full object-cover opacity-50 scale-110" id="hero-img">
            <div class="text-center z-10 px-10">
                <h1 class="text-8xl md:text-[12rem] font-luxury italic reveal">Sovereign.</h1>
                <p class="tracking-[20px] uppercase text-[10px] text-gold mt-10 reveal">The World's Most Exclusive Residency</p>
            </div>
        </section>

        <section id="gallery" class="py-40 bg-white text-black">
            <div class="max-w-7xl mx-auto px-10 mb-20 flex justify-between items-end">
                <div>
                    <span class="text-[10px] tracking-[8px] uppercase text-gray-400">Spatial Aesthetics</span>
                    <h2 class="text-7xl font-luxury mt-4">Estate Scenes.</h2>
                </div>
                <div class="flex space-x-6">
                    <button onclick="slider.move(-1)" class="w-20 h-20 border border-black flex items-center justify-center hover:bg-black hover:text-white transition">‚Üê</button>
                    <button onclick="slider.move(1)" class="w-20 h-20 border border-black flex items-center justify-center hover:bg-black hover:text-white transition">‚Üí</button>
                </div>
            </div>

            <div id="gallery-viewport">
                <div class="slide active" data-enter="from-top">
                    <img src="https://images.unsplash.com/photo-1571896349842-33c89424de2d">
                    <div class="slide-caption"><h4 class="text-5xl font-luxury text-white">The Infinity Pool</h4></div>
                </div>
                <div class="slide" data-enter="from-bottom">
                    <img src="https://images.unsplash.com/photo-1582719478250-c89cae4dc85b">
                    <div class="slide-caption"><h4 class="text-5xl font-luxury text-white">Royal Master Wing</h4></div>
                </div>
                <div class="slide" data-enter="from-left">
                    <img src="https://images.unsplash.com/photo-1560662105-57f8ad6ae2d1">
                    <div class="slide-caption"><h4 class="text-5xl font-luxury text-white">Imperial Dining</h4></div>
                </div>
                <div class="slide" data-enter="from-right">
                    <img src="https://images.unsplash.com/photo-1540541338287-41700207dee6">
                    <div class="slide-caption"><h4 class="text-5xl font-luxury text-white">Lakeside Sanctuary</h4></div>
                </div>
            </div>
        </section>

        <section id="booking" class="py-40 bg-[#080808] text-white px-10">
            <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-32">
                <div class="reveal">
                    <h2 class="text-6xl font-luxury mb-12 text-gold">Registry.</h2>
                    <form id="book-form" class="space-y-12">
                        <div>
                            <label class="text-[10px] uppercase tracking-widest text-gray-500">Legal Identity</label>
                            <input type="text" id="gName" class="lux-input" placeholder="Full Name" required>
                        </div>

                        <div>
                            <label class="text-[10px] uppercase tracking-widest text-gray-500">Email Address</label>
                            <input type="email" id="gEmail" class="lux-input" placeholder="your@email.com" required>
                        </div>

                        <div>
                            <label class="text-[10px] uppercase tracking-widest text-gray-500">Mobile Contact</label>
                            <input type="tel" id="gPhone" class="lux-input" placeholder="+91 9999999999" required>
                        </div>

                        <div class="grid grid-cols-2 gap-10">
                            <div>
                                <label class="text-[10px] uppercase tracking-widest text-gray-500">Check-In</label>
                                <input type="date" id="cin" class="lux-input" required>
                            </div>
                            <div>
                                <label class="text-[10px] uppercase tracking-widest text-gray-500">Check-Out</label>
                                <input type="date" id="cout" class="lux-input" required>
                            </div>
                        </div>

                        <div>
                            <label class="text-[10px] uppercase tracking-widest text-gray-500">Residence Tier</label>
                            <select id="gTier" class="lux-input bg-transparent" required>
                                <option value="8000">Sovereign Suite ‚Äî ‚Çπ8,000 / night</option>
                                <option value="18000">Imperial Penthouse ‚Äî ‚Çπ18,000 / night</option>
                            </select>
                        </div>

                        <button type="button" onclick="logic.process()" class="w-full bg-white text-black py-8 font-black uppercase tracking-[5px] text-xs hover:bg-gold transition shadow-2xl" style="display: block !important; visibility: visible !important; cursor: pointer !important;">Verify & Reserve</button>
                    </form>
                </div>

                <div>
                    <h3 class="text-xs uppercase tracking-[5px] text-gray-500 mb-16 font-bold">Active Estate Ledger</h3>
                    <div id="live-feed" class="space-y-6"></div>
                </div>
            </div>
        </section>
    </main>

    <div id="admin-panel" class="hidden fixed inset-0 z-[6000] bg-white text-black p-10 md:p-32 overflow-y-auto">
        <div class="flex justify-between items-center mb-16 border-b border-gray-100 pb-10">
            <div>
                <h2 class="text-7xl font-luxury">Intelligence Hub</h2>
                <p class="text-xs tracking-[5px] text-gray-400 uppercase mt-2">Core Sales Analytics & Spatial Logic</p>
            </div>
            <button onclick="admin.close()" class="bg-black text-white px-10 py-4 uppercase text-[10px] tracking-widest font-bold">Disconnect</button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-10 mb-16">
            <div class="lg:col-span-2 bg-gray-50 p-10 rounded-[40px] border border-gray-100">
                <h3 class="text-xs font-bold uppercase tracking-widest mb-8 text-gray-400">Sales Performance</h3>
                <canvas id="revenueChart" style="max-height: 250px;"></canvas>
            </div>

            <div class="bg-gray-50 p-10 rounded-[40px] border border-gray-100">
                <h3 class="text-xs font-bold uppercase tracking-widest mb-8 text-gray-400">Spatial Occupancy</h3>
                <div class="space-y-8 mt-4">
                    <div>
                        <p class="text-[8px] uppercase tracking-[3px] mb-4 text-gray-400">Floor 01 (Executive)</p>
                        <div id="map-f1" class="flex flex-wrap gap-3"></div>
                    </div>
                    <div>
                        <p class="text-[8px] uppercase tracking-[3px] mb-4 text-gray-400">Floor 02 (Imperial)</p>
                        <div id="map-f2" class="flex flex-wrap gap-3"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-10 mb-16">
            <div class="bg-black text-white p-12 rounded-[40px]">
                <p class="text-[10px] uppercase text-gray-500 tracking-widest">Total Sales (Lifetime)</p>
                <h4 id="adm-rev" class="text-6xl font-luxury mt-4 text-gold">‚Çπ0</h4>
            </div>
            <div class="bg-gold p-12 rounded-[40px]">
                <p class="text-[10px] uppercase text-black/50 tracking-widest">Active Residents</p>
                <h4 id="adm-occ" class="text-6xl font-luxury mt-4 text-black">0</h4>
            </div>
        </div>

        <div class="overflow-x-auto">
            <h3 class="text-xs font-bold uppercase tracking-widest mb-8 text-gray-400 px-4">Master Resident Ledger</h3>
            <table class="w-full text-left border-collapse">
                <thead class="bg-gray-100 text-[10px] uppercase tracking-widest text-gray-500">
                    <tr>
                        <th class="p-8 border-b">Guest Identity</th>
                        <th class="p-8 border-b">Duration</th>
                        <th class="p-8 border-b">Revenue Impact</th>
                        <th class="p-8 border-b">Contact Details</th>
                        <th class="p-8 border-b text-right">Operations</th>
                    </tr>
                </thead>
                <tbody id="admin-table-body"></tbody>
            </table>
        </div>
    </div>

    <script>
        // 1. DATA CORE
        let DB = {
            bookings: JSON.parse(localStorage.getItem('gh_v12_db')) || [],
            revenue: parseInt(localStorage.getItem('gh_v12_rev')) || 0
        };

        // 2. SLIDER
        const slider = {
            current: 0,
            slides: document.querySelectorAll('.slide'),
            isMoving: false,
            move(dir) {
                if(this.isMoving) return;
                this.isMoving = true;
                const prevSlide = this.slides[this.current];
                this.current = (this.current + dir + this.slides.length) % this.slides.length;
                const nextSlide = this.slides[this.current];
                const mode = nextSlide.dataset.enter;

                let startX = 0, startY = 0;
                if(mode === 'from-top') startY = '-100%';
                if(mode === 'from-bottom') startY = '100%';
                if(mode === 'from-left') startX = '-100%';
                if(mode === 'from-right') startX = '100%';

                gsap.set(nextSlide, { x: startX, y: startY, opacity: 1, display: 'block', zIndex: 15 });
                const tl = gsap.timeline({
                    onComplete: () => {
                        prevSlide.classList.remove('active');
                        prevSlide.style.display = 'none';
                        nextSlide.classList.add('active');
                        this.isMoving = false;
                    }
                });
                tl.to(nextSlide, { x: 0, y: 0, duration: 1.5, ease: "expo.inOut" })
                  .to(nextSlide.querySelector('.slide-caption'), { opacity: 1, y: 0, duration: 1 }, "-=0.5");
            }
        };

        // 3. BOOKING LOGIC
        const logic = {
            process() {
                const name = document.getElementById('gName').value;
                const email = document.getElementById('gEmail').value;
                const phone = document.getElementById('gPhone').value;
                const cin = document.getElementById('cin').value;
                const cout = document.getElementById('cout').value;
                const pricePerNight = parseInt(document.getElementById('gTier').value);

                if(!name || !email || !phone || !cin || !cout) {
                    alert("System requires complete guest information including email and phone.");
                    return;
                }

                if(DB.bookings.length >= 20) {
                    alert("Estate capacity reached (20/20).");
                    return;
                }

                const d1 = new Date(cin);
                const d2 = new Date(cout);
                const nights = (d2 - d1) / (1000 * 60 * 60 * 24);

                if(nights <= 0) {
                    alert("Stay duration error. Check-out must be after check-in.");
                    return;
                }

                const totalBill = pricePerNight * nights;

                // Create booking entry immediately (no payment gateway)
                const entry = {
                    id: 'GH-' + Math.floor(Math.random()*999999),
                    name,
                    email,
                    phone,
                    cin,
                    cout,
                    nights,
                    pricePerNight,
                    total: totalBill,
                    timestamp: new Date().toLocaleString()
                };

                DB.bookings.push(entry);
                DB.revenue += totalBill;
                this.sync();
                ui.render();

                // Generate and download receipt
                admin.pdf(entry.id);

                // Send notifications
                this.sendNotifications(entry);

                alert(`‚úÖ Booking confirmed!\n\nBooking ID: ${entry.id}\nTotal: ‚Çπ${totalBill.toLocaleString()}\n\nReceipt downloaded automatically.\nConfirmation sent to email and WhatsApp.`);

                // Clear form
                document.getElementById('book-form').reset();
            },

            sendNotifications(booking) {
                // Email notification
                this.sendEmail(booking);

                // WhatsApp notification
                this.sendWhatsApp(booking);
            },

            sendEmail(booking) {
                // Simulate email sending (you would integrate with an email service like SendGrid, Mailgun, etc.)
                const taxAmount = Math.round(booking.total * 0.12);
                const totalWithTax = booking.total + taxAmount;
                const roomType = booking.pricePerNight === 8000 ? "Sovereign Suite (Deluxe)" : "Imperial Penthouse (Premium)";

                console.log('üìß EMAIL SENT TO:', booking.email);
                console.log('Subject: üèõÔ∏è Grand Horizon - Booking Confirmation Receipt');
                console.log('Body:', `
<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: #f5f5f5; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .header { background: linear-gradient(135deg, #050505 0%, #1a1a1a 100%); padding: 40px; text-align: center; border: 4px solid #D4AF37; }
        .header h1 { color: #D4AF37; font-size: 36px; margin: 0; font-family: Georgia, serif; letter-spacing: 3px; }
        .header p { color: #ffffff; font-size: 14px; margin: 10px 0 0 0; letter-spacing: 2px; }
        .content { padding: 40px 30px; }
        .section { margin-bottom: 30px; }
        .section-title { font-size: 18px; color: #D4AF37; font-weight: bold; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #D4AF37; }
        .detail-row { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #eee; }
        .detail-label { font-weight: bold; color: #333; }
        .detail-value { color: #666; }
        .highlight-box { background: linear-gradient(135deg, #D4AF37 0%, #FFD700 100%); color: #000; padding: 20px; border-radius: 8px; text-align: center; margin: 20px 0; }
        .highlight-box h2 { margin: 0; font-size: 28px; }
        .amenities { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .amenity-item { padding: 8px; background: #f9f9f9; border-radius: 5px; font-size: 13px; }
        .amenity-item:before { content: "‚úì "; color: #D4AF37; font-weight: bold; }
        .footer { background: #050505; color: white; padding: 30px; text-align: center; }
        .footer a { color: #D4AF37; text-decoration: none; }
        .button { display: inline-block; background: #D4AF37; color: #000; padding: 15px 40px; text-decoration: none; border-radius: 5px; font-weight: bold; margin: 20px 0; }
        .status-confirmed { background: #28a745; color: white; padding: 10px 20px; border-radius: 20px; display: inline-block; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>GRAND HORIZON</h1>
            <p>SOVEREIGN ENTERPRISE SUITE</p>
            <p style="font-size: 11px; margin-top: 15px; opacity: 0.8;">123 Luxury Boulevard, Mumbai - 400001 | +91 22 1234 5678</p>
        </div>

        <div class="content">
            <h2 style="color: #333; text-align: center; margin-bottom: 10px;">üéâ Booking Confirmed!</h2>
            <p style="text-align: center; color: #666; margin-bottom: 30px;">Dear ${booking.name}, your luxury stay has been successfully reserved.</p>

            <div class="status-confirmed" style="text-align: center; width: 100%;">‚úì CONFIRMED & PAID</div>

            <div class="section">
                <div class="section-title">üìã BOOKING INFORMATION</div>
                <div class="detail-row">
                    <span class="detail-label">Booking ID:</span>
                    <span class="detail-value" style="font-weight: bold; color: #D4AF37;">${booking.id}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Booking Date:</span>
                    <span class="detail-value">${booking.timestamp}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Transaction ID:</span>
                    <span class="detail-value">TXN${booking.id}</span>
                </div>
            </div>

            <div class="section">
                <div class="section-title">üë§ GUEST DETAILS</div>
                <div class="detail-row">
                    <span class="detail-label">Name:</span>
                    <span class="detail-value">${booking.name}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Email:</span>
                    <span class="detail-value">${booking.email}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Phone:</span>
                    <span class="detail-value">${booking.phone}</span>
                </div>
            </div>

            <div class="section">
                <div class="section-title">üè® RESERVATION DETAILS</div>
                <div class="detail-row">
                    <span class="detail-label">Room Type:</span>
                    <span class="detail-value">${roomType}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Check-In:</span>
                    <span class="detail-value">${booking.cin} at 2:00 PM</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Check-Out:</span>
                    <span class="detail-value">${booking.cout} at 12:00 PM</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Total Nights:</span>
                    <span class="detail-value">${booking.nights} Night(s)</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Occupancy:</span>
                    <span class="detail-value">2 Adults + 1 Child (Max)</span>
                </div>
            </div>

            <div class="section">
                <div class="section-title">üí∞ PAYMENT SUMMARY</div>
                <div class="detail-row">
                    <span class="detail-label">Room Charges (${booking.nights} nights √ó ‚Çπ${booking.pricePerNight.toLocaleString()}):</span>
                    <span class="detail-value">‚Çπ${booking.total.toLocaleString()}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">GST (12%):</span>
                    <span class="detail-value">‚Çπ${taxAmount.toLocaleString()}</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Service Charge:</span>
                    <span class="detail-value">Complimentary</span>
                </div>
                <div class="highlight-box">
                    <p style="margin: 0; font-size: 14px; opacity: 0.8;">TOTAL AMOUNT PAID</p>
                    <h2>‚Çπ${totalWithTax.toLocaleString()}</h2>
                    <p style="margin: 10px 0 0 0; font-size: 12px;">Payment Method: Online</p>
                </div>
            </div>

            <div class="section">
                <div class="section-title">üåü COMPLIMENTARY AMENITIES</div>
                <div class="amenities">
                    <div class="amenity-item">High-Speed WiFi (100 Mbps)</div>
                    <div class="amenity-item">Welcome Drinks</div>
                    <div class="amenity-item">Daily Breakfast Buffet</div>
                    <div class="amenity-item">Airport Pickup & Drop</div>
                    <div class="amenity-item">24/7 Room Service</div>
                    <div class="amenity-item">Spa & Wellness Access</div>
                    <div class="amenity-item">Swimming Pool & Gym</div>
                    <div class="amenity-item">Valet Parking</div>
                    <div class="amenity-item">Concierge Services</div>
                    <div class="amenity-item">Laundry (2 pieces/day)</div>
                </div>
            </div>

            <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; border-left: 4px solid #D4AF37;">
                <h3 style="margin: 0 0 15px 0; color: #D4AF37; font-size: 16px;">üìå IMPORTANT INFORMATION</h3>
                <p style="margin: 8px 0; font-size: 13px; color: #555;">‚úì Carry a valid government-issued photo ID for check-in</p>
                <p style="margin: 8px 0; font-size: 13px; color: #555;">‚úì Early check-in/late check-out subject to availability</p>
                <p style="margin: 8px 0; font-size: 13px; color: #555;">‚úì 24/7 Emergency Contact: +91 22 1234 5678</p>
                <p style="margin: 8px 0; font-size: 13px; color: #555;">‚úì Free cancellation up to 48 hours before check-in</p>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <a href="#" class="button">VIEW BOOKING DETAILS</a>
            </div>
        </div>

        <div class="footer">
            <h3 style="color: #D4AF37; margin: 0 0 15px 0;">GRAND HORIZON SOVEREIGN ESTATE</h3>
            <p style="margin: 10px 0; font-size: 13px;">123 Luxury Boulevard, Premium District, Mumbai - 400001</p>
            <p style="margin: 10px 0; font-size: 13px;">Phone: +91 22 1234 5678 | Email: <a href="mailto:reservations@grandhorizon.com">reservations@grandhorizon.com</a></p>
            <p style="margin: 10px 0; font-size: 13px;">Website: <a href="https://www.grandhorizon.com">www.grandhorizon.com</a></p>
            <p style="margin: 20px 0 10px 0; font-size: 12px; opacity: 0.7;">Follow us on social media: Facebook | Instagram | Twitter | LinkedIn</p>
            <p style="margin: 10px 0; font-size: 11px; opacity: 0.6;">This is an automated email. Please do not reply directly to this message.</p>
        </div>
    </div>
</body>
</html>
                `);

                // In production, integrate with email service:
                /*
                fetch('YOUR_EMAIL_API_ENDPOINT', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        to: booking.email,
                        subject: 'üèõÔ∏è Grand Horizon - Booking Confirmation Receipt',
                        html: emailHTML
                    })
                });
                */
            },

            sendWhatsApp(booking) {
                // WhatsApp Business API integration
                const taxAmount = Math.round(booking.total * 0.12);
                const totalWithTax = booking.total + taxAmount;
                const roomType = booking.pricePerNight === 8000 ? "Sovereign Suite (Deluxe)" : "Imperial Penthouse (Premium)";

                const message = `
üèõÔ∏è *GRAND HORIZON* üèõÔ∏è
_Sovereign Enterprise Suite_

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ *BOOKING CONFIRMED*
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Dear *${booking.name}*,

Your luxury reservation at Grand Horizon has been successfully confirmed! Thank you for choosing us for your stay.

üìã *BOOKING INFORMATION*
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üÜî Booking ID: *${booking.id}*
üóìÔ∏è Booked On: ${booking.timestamp}
üí≥ Transaction: TXN${booking.id}
‚úÖ Status: *PAID & CONFIRMED*

üë§ *GUEST DETAILS*
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìù Name: ${booking.name}
üìß Email: ${booking.email}
üìû Phone: ${booking.phone}

üè® *RESERVATION DETAILS*
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üõèÔ∏è Room Type: *${roomType}*
üìÖ Check-In: *${booking.cin}* at 2:00 PM
üìÖ Check-Out: *${booking.cout}* at 12:00 PM
üåô Total Nights: *${booking.nights} Night(s)*
üë• Occupancy: 2 Adults + 1 Child (Max)

üí∞ *PAYMENT SUMMARY*
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üè∑Ô∏è Room Charges: ‚Çπ${booking.total.toLocaleString()}
üßæ GST (12%): ‚Çπ${taxAmount.toLocaleString()}
üéÅ Service Charge: Complimentary
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üíµ *TOTAL PAID: ‚Çπ${totalWithTax.toLocaleString()}*

üåü *COMPLIMENTARY AMENITIES*
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úì High-Speed WiFi (100 Mbps)
‚úì Welcome Drinks on Arrival
‚úì Daily Breakfast Buffet
‚úì Airport Pickup & Drop
‚úì 24/7 Room Service
‚úì Spa & Wellness Access
‚úì Swimming Pool & Gym Access
‚úì Valet Parking
‚úì Concierge Services
‚úì Laundry Service (2 pieces/day)

üìå *IMPORTANT INFORMATION*
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚Ä¢ Carry valid govt. ID for check-in
‚Ä¢ Early check-in/late check-out: Subject to availability
‚Ä¢ Free cancellation: Up to 48 hours before check-in
‚Ä¢ 24/7 Emergency: +91 22 1234 5678

üìç *LOCATION*
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Grand Horizon Sovereign Estate
123 Luxury Boulevard
Premium District, Mumbai - 400001

üìû *CONTACT US*
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚òéÔ∏è Phone: +91 22 1234 5678
üìß Email: reservations@grandhorizon.com
üåê Website: www.grandhorizon.com

üó∫Ô∏è GPS: 19.0760¬∞ N, 72.8777¬∞ E

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚ú® *We look forward to welcoming you!* ‚ú®

Your comfort and satisfaction are our top priorities. Should you need any assistance before your arrival, please don't hesitate to contact us.

Have a wonderful day! üåû

_Grand Horizon - Where Luxury Meets Excellence_
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üì± Follow us on social media:
@GrandHorizonHotel

üîí This is an automated message. Please do not share your booking ID with anyone.
                `.trim();

                console.log('üì± WHATSAPP SENT TO:', booking.phone);
                console.log('Message:', message);

                // In production, integrate with WhatsApp Business API:
                /*
                fetch('YOUR_WHATSAPP_API_ENDPOINT', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        to: booking.phone,
                        message: message
                    })
                });
                */

                // Alternative: Open WhatsApp Web with pre-filled message
                const encodedMessage = encodeURIComponent(message);
                const whatsappUrl = `https://wa.me/${booking.phone.replace(/\D/g, '')}?text=${encodedMessage}`;
                console.log('WhatsApp URL:', whatsappUrl);
                // window.open(whatsappUrl, '_blank'); // Uncomment to auto-open WhatsApp
            },

            manualCheckout(id) {
                if(confirm("Authorize immediate spatial vacancy for this resident?")) {
                    DB.bookings = DB.bookings.filter(b => b.id !== id);
                    this.sync();
                    admin.renderTable();
                    admin.renderMap();
                    admin.initAnalytics();
                    ui.render();
                }
            },

            sync() {
                localStorage.setItem('gh_v12_db', JSON.stringify(DB.bookings));
                localStorage.setItem('gh_v12_rev', DB.revenue);
            }
        };

        // 4. INTELLIGENCE HUB ENGINE
        let myChart = null;
        const admin = {
            open() {
                const pass = prompt("Enter Intelligence Access Key:");
                if(pass === "090909") {
                    document.getElementById('admin-panel').classList.remove('hidden');
                    this.renderTable();
                    this.initAnalytics();
                    this.renderMap();
                } else {
                    alert("Unauthorized Access Attempt.");
                }
            },
            close() { document.getElementById('admin-panel').classList.add('hidden'); },

            renderMap() {
                const f1 = document.getElementById('map-f1');
                const f2 = document.getElementById('map-f2');
                f1.innerHTML = ''; f2.innerHTML = '';
                for(let i=1; i<=20; i++) {
                    const isOcc = i <= DB.bookings.length;
                    const el = `<div class="room-node ${isOcc ? 'room-occupied' : 'room-vacant'}">${i}</div>`;
                    if(i <= 10) f1.innerHTML += el;
                    else f2.innerHTML += el;
                }
            },

            initAnalytics() {
                const ctx = document.getElementById('revenueChart').getContext('2d');
                const lastBookings = DB.bookings.slice(-8);
                if(myChart) myChart.destroy();
                myChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: lastBookings.map(b => b.name.split(' ')[0]),
                        datasets: [{
                            label: 'Sales Flow',
                            data: lastBookings.map(b => b.total),
                            borderColor: '#D4AF37',
                            backgroundColor: 'rgba(212, 175, 55, 0.05)',
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: '#000'
                        }]
                    },
                    options: { responsive: true, plugins: { legend: { display: false } } }
                });
            },

            renderTable() {
                document.getElementById('adm-rev').innerText = "‚Çπ" + DB.revenue.toLocaleString();
                document.getElementById('adm-occ').innerText = DB.bookings.length;
                const body = document.getElementById('admin-table-body');
                body.innerHTML = DB.bookings.map(b => `
                    <tr class="border-b border-gray-50 hover:bg-gray-50 transition">
                        <td class="p-8">
                            <span class="font-luxury font-bold text-2xl text-black">${b.name}</span><br>
                            <span class="text-[9px] text-gray-400 font-mono">SERIAL: ${b.id}</span>
                        </td>
                        <td class="p-8 text-xs font-bold text-gray-600">${b.cin} <br> ${b.cout}<br><span class="text-[9px] text-gray-400">${b.nights || 'N/A'} nights</span></td>
                        <td class="p-8 font-black text-gold text-xl">‚Çπ${b.total.toLocaleString()}</td>
                        <td class="p-8">
                            <div class="space-y-1">
                                <span class="bg-black text-white px-3 py-1 rounded-full text-[9px] font-mono block w-fit">${b.phone}</span>
                                <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-[9px] font-mono block w-fit">${b.email}</span>
                            </div>
                        </td>
                        <td class="p-8 text-right space-x-2">
                            <button onclick="admin.pdf('${b.id}')" class="bg-gray-100 hover:bg-black hover:text-white px-4 py-2 text-[8px] font-black uppercase rounded-full transition">Receipt</button>
                            <button onclick="logic.manualCheckout('${b.id}')" class="bg-red-50 text-red-500 hover:bg-red-500 hover:text-white px-4 py-2 text-[8px] font-black uppercase rounded-full transition">Check Out</button>
                        </td>
                    </tr>
                `).reverse().join('');
            },

            pdf(id) {
                const b = DB.bookings.find(x => x.id === id);
                if(!b) {
                    alert('Booking not found');
                    return;
                }

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();

                // Header Background with Gold Border
                doc.setFillColor(5, 5, 5);
                doc.rect(0, 0, 210, 70, 'F');
                doc.setDrawColor(212, 175, 55);
                doc.setLineWidth(3);
                doc.rect(0, 0, 210, 70);

                // Logo/Title
                doc.setTextColor(212, 175, 55);
                doc.setFontSize(36);
                doc.setFont(undefined, 'bold');
                doc.text("GRAND HORIZON", 105, 30, { align: 'center' });

                doc.setFontSize(11);
                doc.setFont(undefined, 'normal');
                doc.text("Sovereign Enterprise Suite", 105, 42, { align: 'center' });

                // Hotel Address & Contact
                doc.setFontSize(8);
                doc.setTextColor(200, 200, 200);
                doc.text("123 Luxury Boulevard, Premium District, Mumbai - 400001", 105, 50, { align: 'center' });
                doc.text("Tel: +91 22 1234 5678 | Email: reservations@grandhorizon.com", 105, 57, { align: 'center' });
                doc.text("Website: www.grandhorizon.com | GSTIN: 27AABCU9603R1ZM", 105, 64, { align: 'center' });

                // Booking Receipt Title with Background
                doc.setFillColor(212, 175, 55);
                doc.rect(0, 75, 210, 15, 'F');
                doc.setTextColor(5, 5, 5);
                doc.setFontSize(22);
                doc.setFont(undefined, 'bold');
                doc.text("BOOKING CONFIRMATION RECEIPT", 105, 85, { align: 'center' });

                // Receipt Number & Date in Box
                doc.setDrawColor(100, 100, 100);
                doc.setLineWidth(0.5);
                doc.rect(15, 95, 85, 15);
                doc.rect(110, 95, 85, 15);

                doc.setTextColor(0, 0, 0);
                doc.setFontSize(9);
                doc.setFont(undefined, 'bold');
                doc.text("BOOKING ID", 17, 100);
                doc.setFont(undefined, 'normal');
                doc.setFontSize(11);
                doc.text(b.id, 17, 107);

                doc.setFont(undefined, 'bold');
                doc.setFontSize(9);
                doc.text("BOOKING DATE & TIME", 112, 100);
                doc.setFont(undefined, 'normal');
                doc.setFontSize(11);
                doc.text(b.timestamp, 112, 107);

                // Guest Information Section
                let yPos = 120;
                doc.setFillColor(245, 245, 245);
                doc.rect(15, yPos, 180, 8, 'F');
                doc.setTextColor(0, 0, 0);
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text("GUEST INFORMATION", 17, yPos + 6);

                yPos += 15;
                doc.setFontSize(10);
                doc.setFont(undefined, 'bold');
                doc.text("Guest Name:", 20, yPos);
                doc.setFont(undefined, 'normal');
                doc.text(b.name, 70, yPos);

                yPos += 10;
                doc.setFont(undefined, 'bold');
                doc.text("Email Address:", 20, yPos);
                doc.setFont(undefined, 'normal');
                doc.text(b.email, 70, yPos);

                yPos += 10;
                doc.setFont(undefined, 'bold');
                doc.text("Phone Number:", 20, yPos);
                doc.setFont(undefined, 'normal');
                doc.text(b.phone, 70, yPos);

                yPos += 10;
                doc.setFont(undefined, 'bold');
                doc.text("Guest ID Type:", 20, yPos);
                doc.setFont(undefined, 'normal');
                doc.text("As per Government Records", 70, yPos);

                // Reservation Details Section
                yPos += 15;
                doc.setFillColor(245, 245, 245);
                doc.rect(15, yPos, 180, 8, 'F');
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text("RESERVATION DETAILS", 17, yPos + 6);

                yPos += 15;
                doc.setFontSize(10);
                doc.setFont(undefined, 'bold');
                doc.text("Room Type:", 20, yPos);
                doc.setFont(undefined, 'normal');
                const roomType = b.pricePerNight === 8000 ? "Sovereign Suite (Deluxe)" : "Imperial Penthouse (Premium)";
                doc.text(roomType, 70, yPos);

                yPos += 10;
                doc.setFont(undefined, 'bold');
                doc.text("Check-In Date:", 20, yPos);
                doc.setFont(undefined, 'normal');
                doc.text(b.cin, 70, yPos);
                doc.setFont(undefined, 'bold');
                doc.text("Check-In Time:", 120, yPos);
                doc.setFont(undefined, 'normal');
                doc.text("2:00 PM", 165, yPos);

                yPos += 10;
                doc.setFont(undefined, 'bold');
                doc.text("Check-Out Date:", 20, yPos);
                doc.setFont(undefined, 'normal');
                doc.text(b.cout, 70, yPos);
                doc.setFont(undefined, 'bold');
                doc.text("Check-Out Time:", 120, yPos);
                doc.setFont(undefined, 'normal');
                doc.text("12:00 PM", 165, yPos);

                yPos += 10;
                doc.setFont(undefined, 'bold');
                doc.text("Total Nights:", 20, yPos);
                doc.setFont(undefined, 'normal');
                doc.text(`${b.nights || 'N/A'} Night(s)`, 70, yPos);
                doc.setFont(undefined, 'bold');
                doc.text("No. of Guests:", 120, yPos);
                doc.setFont(undefined, 'normal');
                doc.text("As per booking", 165, yPos);

                yPos += 10;
                doc.setFont(undefined, 'bold');
                doc.text("Occupancy:", 20, yPos);
                doc.setFont(undefined, 'normal');
                doc.text("2 Adults + 1 Child (Max)", 70, yPos);

                // Payment Breakdown Section
                yPos += 15;
                doc.setFillColor(245, 245, 245);
                doc.rect(15, yPos, 180, 8, 'F');
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text("PAYMENT BREAKDOWN", 17, yPos + 6);

                yPos += 15;
                doc.setFontSize(10);

                // Table Header
                doc.setFillColor(230, 230, 230);
                doc.rect(20, yPos - 5, 170, 8, 'F');
                doc.setFont(undefined, 'bold');
                doc.text("Description", 22, yPos);
                doc.text("Rate", 100, yPos);
                doc.text("Qty/Nights", 130, yPos);
                doc.text("Amount", 165, yPos);

                yPos += 8;
                doc.setFont(undefined, 'normal');
                doc.text("Room Charges", 22, yPos);
                doc.text(`‚Çπ${(b.pricePerNight || 0).toLocaleString()}`, 100, yPos);
                doc.text(`${b.nights || 0}`, 130, yPos);
                doc.text(`‚Çπ${b.total.toLocaleString()}`, 165, yPos);

                yPos += 8;
                const taxAmount = Math.round(b.total * 0.12);
                doc.text("GST (12%)", 22, yPos);
                doc.text("-", 100, yPos);
                doc.text("-", 130, yPos);
                doc.text(`‚Çπ${taxAmount.toLocaleString()}`, 165, yPos);

                yPos += 8;
                doc.text("Service Charge", 22, yPos);
                doc.text("-", 100, yPos);
                doc.text("-", 130, yPos);
                doc.text("Complimentary", 165, yPos);

                yPos += 2;
                doc.setDrawColor(212, 175, 55);
                doc.setLineWidth(1);
                doc.line(20, yPos, 190, yPos);

                yPos += 8;
                doc.setFontSize(14);
                doc.setFont(undefined, 'bold');
                doc.setTextColor(212, 175, 55);
                doc.text("TOTAL AMOUNT PAID:", 22, yPos);
                const totalWithTax = b.total + taxAmount;
                doc.text(`‚Çπ${totalWithTax.toLocaleString()}`, 165, yPos);

                yPos += 10;
                doc.setFontSize(9);
                doc.setTextColor(0, 150, 0);
                doc.setFont(undefined, 'bold');
                doc.text("‚úì PAYMENT STATUS: CONFIRMED", 22, yPos);
                doc.setTextColor(0, 0, 0);
                doc.setFont(undefined, 'normal');
                doc.text(`Payment Method: Online | Transaction ID: TXN${b.id}`, 22, yPos + 6);

                // Amenities & Services Section
                yPos += 18;
                doc.setFillColor(245, 245, 245);
                doc.rect(15, yPos, 180, 8, 'F');
                doc.setFontSize(12);
                doc.setFont(undefined, 'bold');
                doc.text("COMPLIMENTARY AMENITIES & SERVICES", 17, yPos + 6);

                yPos += 13;
                doc.setFontSize(8);
                doc.setFont(undefined, 'normal');
                const amenities = [
                    "‚úì High-Speed WiFi (100 Mbps)",
                    "‚úì Welcome Drinks on Arrival",
                    "‚úì Daily Breakfast Buffet",
                    "‚úì Airport Pickup & Drop",
                    "‚úì 24/7 Room Service",
                    "‚úì Spa & Wellness Access",
                    "‚úì Swimming Pool & Gym",
                    "‚úì Valet Parking",
                    "‚úì Concierge Services",
                    "‚úì Laundry Service (2 pieces/day)"
                ];

                let col = 0;
                amenities.forEach((amenity, index) => {
                    const xPos = col === 0 ? 20 : 110;
                    doc.text(amenity, xPos, yPos);
                    if(col === 1) {
                        yPos += 5;
                        col = 0;
                    } else {
                        col++;
                    }
                });

                if(col === 1) yPos += 5;

                // Terms & Conditions
                yPos += 8;
                doc.setFillColor(245, 245, 245);
                doc.rect(15, yPos, 180, 8, 'F');
                doc.setFontSize(10);
                doc.setFont(undefined, 'bold');
                doc.text("TERMS & CONDITIONS", 17, yPos + 6);

                yPos += 12;
                doc.setFontSize(7);
                doc.setFont(undefined, 'normal');
                doc.setTextColor(60, 60, 60);
                const terms = [
                    "‚Ä¢ Check-in time is 2:00 PM and check-out time is 12:00 PM. Early check-in/late check-out subject to availability.",
                    "‚Ä¢ Valid government-issued photo ID and address proof required at check-in for all guests.",
                    "‚Ä¢ Cancellation charges: 100% refund if cancelled 48 hours before check-in, 50% if within 48 hours, no refund on same day.",
                    "‚Ä¢ Smoking is strictly prohibited in rooms. Smoking area available on premises. Violation fine: ‚Çπ5,000.",
                    "‚Ä¢ Guests are responsible for any damage to hotel property during their stay.",
                    "‚Ä¢ Outside food and beverages are not permitted in the hotel premises.",
                    "‚Ä¢ Hotel reserves the right to refuse service or ask guests to leave for misconduct or violation of hotel policies.",
                    "‚Ä¢ Valuables should be deposited in the safe deposit lockers. Hotel is not responsible for loss of valuables.",
                    "‚Ä¢ This is a computer-generated receipt and does not require a signature."
                ];

                terms.forEach(term => {
                    const lines = doc.splitTextToSize(term, 170);
                    lines.forEach(line => {
                        doc.text(line, 20, yPos);
                        yPos += 4;
                    });
                });

                // QR Code Placeholder & Important Info Box
                doc.setDrawColor(212, 175, 55);
                doc.setLineWidth(2);
                doc.rect(15, 265, 30, 30);
                doc.setFontSize(7);
                doc.setTextColor(100, 100, 100);
                doc.text("QR CODE", 23, 280, { align: 'center' });
                doc.text("SCAN ME", 23, 285, { align: 'center' });

                doc.setDrawColor(100, 100, 100);
                doc.setLineWidth(0.5);
                doc.rect(50, 265, 145, 30);
                doc.setFontSize(8);
                doc.setFont(undefined, 'bold');
                doc.setTextColor(212, 175, 55);
                doc.text("IMPORTANT INFORMATION", 52, 270);
                doc.setFont(undefined, 'normal');
                doc.setFontSize(7);
                doc.setTextColor(0, 0, 0);
                doc.text("‚Ä¢ Carry this receipt for smooth check-in process", 52, 276);
                doc.text("‚Ä¢ Emergency Contact: +91 22 1234 5678 (24/7 Available)", 52, 281);
                doc.text("‚Ä¢ For any queries, email: support@grandhorizon.com", 52, 286);
                doc.text("‚Ä¢ GPS Coordinates: 19.0760¬∞ N, 72.8777¬∞ E", 52, 291);

                // Footer with Social Media & Thank You
                doc.setFillColor(5, 5, 5);
                doc.rect(0, 297, 210, 3, 'F');

                doc.setFontSize(10);
                doc.setTextColor(212, 175, 55);
                doc.setFont(undefined, 'bold');
                doc.text("Thank you for choosing Grand Horizon! We look forward to hosting you.", 105, 304, { align: 'center' });

                doc.setFontSize(7);
                doc.setTextColor(100, 100, 100);
                doc.setFont(undefined, 'normal');
                doc.text("Follow us: @GrandHorizonHotel | Facebook | Instagram | Twitter | LinkedIn", 105, 310, { align: 'center' });
                doc.text("Grand Horizon Sovereign Estate | CIN: U55101MH2020PTC123456 | ISO 9001:2015 Certified", 105, 315, { align: 'center' });
                doc.text("This is a system-generated document. For queries, contact reservations@grandhorizon.com", 105, 320, { align: 'center' });

                // Save PDF
                doc.save(`GrandHorizon_Receipt_${b.id}.pdf`);
                console.log(`‚úÖ Detailed receipt generated for booking ${b.id}`);
            }
        };

        // 5. UI ORCHESTRATION
        const ui = {
            render() {
                document.getElementById('room-count').innerText = 20 - DB.bookings.length;
                const feed = document.getElementById('live-feed');
                feed.innerHTML = DB.bookings.slice(-3).reverse().map(b => `
                    <div class="p-8 bg-[#111] border-l-4 border-gold reveal active">
                        <h4 class="font-luxury text-2xl text-gold">${b.name}</h4>
                        <p class="text-[9px] uppercase tracking-widest text-gray-500 mt-2">${b.cin} ‚Äî ${b.cout}</p>
                    </div>
                `).join('');
            }
        };

        window.addEventListener('load', () => {
            gsap.to("#preloader", { opacity: 0, duration: 1, delay: 1, onComplete: () => document.getElementById('preloader').style.display='none' });
            ui.render();
            document.addEventListener('mousemove', e => {
                gsap.to("#cursor-main", { x: e.clientX, y: e.clientY, duration: 0.1 });
                gsap.to("#cursor-aura", { x: e.clientX - 15, y: e.clientY - 15, duration: 0.3 });
            });
            gsap.registerPlugin(ScrollTrigger);
            document.querySelectorAll('.reveal').forEach(el => {
                ScrollTrigger.create({ trigger: el, start: "top 95%", onEnter: () => el.classList.add('active') });
            });
        });
    </script>
</body>
</html>